<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Medical Device CAD Portfolio | SOLIDWORKS Specialist</title>

  <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

  <style>
    /* ──────────────────────────────────────────────────────────────────────────
       (Your existing CSS, unchanged)
    ────────────────────────────────────────────────────────────────────────── */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6; color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .main-container { /* … */ }
    header { /* … */ }
    /* (all your other styles here) */
    .assembly-btn { /* … */ }
    .assembly-btn.active { /* … */ }
    .error-message { /* … */ }
  </style>
</head>

<body>
  <div class="main-container">
    <header>
      <div class="header-content">
        <h1>Tadas Turonis</h1>
        <div class="subtitle">Medical Engineering Student</div>
        <p class="hero-description">
          SOLIDWORKS modeling and medical device design projects | Vilnius TECH
        </p>
        <a href="#portfolio" class="cta-button">View My Work</a>
      </div>
    </header>

    <main>
      <section id="portfolio" class="portfolio-section">
        <h2 class="section-title">Academic Projects &amp; Learning Portfolio</h2>
        <div class="device-grid">

          <!-- … your other device-cards … -->

          <!-- Medical Syringe with Assembly Features -->
          <div class="device-card">
            <div class="device-image">
              <div class="model-container">
                <div class="model-status" id="syringe-status">Loading...</div>
                <model-viewer
                  src="./syringe/syringe.gltf"
                  alt="Medical Syringe 3D Model with Assembly"
                  camera-controls
                  auto-rotate
                  auto-rotate-delay="4000"
                  rotation-per-second="20deg"
                  environment-image="neutral"
                  shadow-intensity="1"
                  exposure="1"
                  ar
                  ar-modes="webxr scene-viewer quick-look"
                  id="syringe-viewer">
                  <div slot="poster" class="fallback-placeholder loading">
                    <div class="model-icon">💉</div>
                    <div>Loading 3D Assembly…</div>
                    <div style="font-size:0.9rem;opacity:0.7;margin-top:0.5rem;">
                      Medical Syringe Assembly
                    </div>
                  </div>
                </model-viewer>
              </div>

              <div class="assembly-controls">
                <button
                  class="assembly-btn"
                  onclick="toggleExplodedView('syringe-viewer')"
                  id="syringe-explode-btn">
                  🔧 Exploded View
                </button>
                <button
                  class="assembly-btn"
                  onclick="resetAssembly('syringe-viewer')">
                  🔄 Reset View
                </button>
                <button
                  class="assembly-btn"
                  onclick="showAssemblyAnimation('syringe-viewer')">
                  ▶️ Assembly Animation
                </button>
              </div>

              <div class="error-message" id="syringe-error" style="display:none;">
                <strong>Note:</strong> Exploded view requires 
                <code>syringe/syringe_exploded/syringe_exploded.gltf</code> to exist.
              </div>
            </div>

            <div class="device-info">
              <h3>Medical Syringe Assembly</h3>
              <p>
                Complete syringe assembly featuring vaccine body, plunger mechanism,
                needle attachment, and rubber seal components. Demonstrates multi-part
                assembly modeling and component interaction design for medical applications.
              </p>
              <div class="assembly-info">
                <h4>Assembly Components:</h4>
                <ul>
                  <li>• Vaccine Body (Main Barrel)</li>
                  <li>• Vaccine Plunger (Injection Mechanism)</li>
                  <li>• Needle Attachment Point</li>
                  <li>• Rubber Seal (Plunger Tip)</li>
                </ul>
              </div>
              <div class="tech-tags">
                <span class="tech-tag">SOLIDWORKS Assembly</span>
                <span class="tech-tag">Multi-Part Design</span>
                <span class="tech-tag">Medical Device</span>
                <span class="tech-tag">Component Integration</span>
                <span class="tech-tag">3D Modeling</span>
              </div>
            </div>
          </div>

          <!-- … any remaining device-cards … -->

        </div>
      </section>
    </main>

    <footer>
      <!-- … your footer content … -->
    </footer>
  </div>

  <!-- ──────────────────────────────────────────────────────────────────────────
       Updated JavaScript for Exploded / Reset / Animation controls
  ────────────────────────────────────────────────────────────────────────── -->
  <script>
    function toggleExplodedView(viewerId) {
      const viewer = document.getElementById(viewerId);
      const button = document.getElementById('syringe-explode-btn');
      const errorMsg = document.getElementById('syringe-error');

      const normalSrc   = './syringe/syringe.gltf';
      const explodedSrc = './syringe/syringe_exploded/syringe_exploded.gltf';

      const current = viewer.getAttribute('src') || '';
      if (current.includes('syringe_exploded')) {
        // Switch back to normal
        viewer.setAttribute('src', normalSrc);
        button.classList.remove('active');
        errorMsg.style.display = 'none';
      } else {
        // Verify the exploded file exists before swapping
        fetch(explodedSrc)
          .then(res => {
            if (!res.ok) throw new Error('Not found');
            viewer.setAttribute('src', explodedSrc);
            button.classList.add('active');
            errorMsg.style.display = 'none';
          })
          .catch(() => {
            errorMsg.style.display = 'block';
          });
      }
    }

    function resetAssembly(viewerId) {
      const viewer = document.getElementById(viewerId);
      viewer.setAttribute('src', './syringe/syringe.gltf');
      document.getElementById('syringe-explode-btn').classList.remove('active');
      document.getElementById('syringe-error').style.display = 'none';
    }

    function showAssemblyAnimation(viewerId) {
      const viewer = document.getElementById(viewerId);
      if (
        viewer.availableAnimations &&
        viewer.availableAnimations.length > 0
      ) {
        viewer.animationName = viewer.availableAnimations[0];
        viewer.play();
      } else {
        alert('No animation available in this model.');
      }
    }
  </script>
</body>
</html>